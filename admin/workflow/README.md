# Workflow

**Workflow** - настраиваемый механизм обработки состояния заказов в магазине или результатов заполнения формы. 
Например, можно отслеживать процесс обработки оформленного заказа: ```Принят -> Собран -> Отгружен -> Доставлен и т.д. ```

::: details Подробнее

![](./1.jpg)

:::

## Настройки

|         Функция         | Описание                                    |
|:-----------------------:|---------------------------------------------|
|      **Название**       | Редактировать название                      |
| **notificationDisable** | Отключение уведомлений о смене состояния WF |

::: details Подробнее

![](./2.jpg)

:::

## WF Состояния

**WF Состояния** - основной раздел, в котором настраиваются состояния через которые должна пройти сущность к которой п
одключен Workflow.

Минимальное количество состояний для работы workflow: 2 состояния, начальное (стартовое) состояние, и 
конечное (финальное) состояние. Стартовое состояние может быть только одно, промежуточных и финальных состояний может 
быть несколько, все зависит от требуемой задачи.

::: details Подробнее

![](./5.jpg)

:::

### Настройка состояния

| Функция                    | Описание                                                                |
|----------------------------|-------------------------------------------------------------------------|
| Название                   | Названия состояния                                                      |
| Пользовательское Описание  | Текст описания состояния для пользователя                               |
| Администраторское Описание | Текст описания состояния для администратора                             |
| Сделать стартовым          | Признак стартового (начального) состояния                               |
| Пользовательское состояние | Доступность состояния пользователю                                      |
| Кнопки                     | Дополнительные кнопки которые можно вывести в сообщении смены состояния |
| Триггер состояния          | Триггер который выполняется перед установкой состояния                  |
| Удалить                    | Удаление состояния                                                      |

::: details Подробнее

![](./7.jpg)

:::

## WF связи

**WF связи** - создание связей между состояниями. Связи создаются, для перехода от одного состояния к другому. Для каждой связи, создается своя кнопка, при нажатии на которую будет обеспечен переход. 

Например: Связь: Собрать заказ обеспечит переход из состояния Принят к состоянию Собран

::: details Подробнее

![](./6.jpg)

:::

### Настройка связей

| Функция                         | Описание                                     |
|---------------------------------|----------------------------------------------|
| Название                        | Название связи (Название кнопки перехода)    |
| Переход доступен администратору | Доступ к смене состояния администратору      |
| Переход доступен пользователю   | Доступ к смене состояния пользователю        |
| Триггер перехода                | Триггер выполняемый во время смены состояния |
| Удалить                         | Удаление связи                               |

::: details Подробнее

![](./8.jpg)

:::

## Триггеры

Триггер Состояния | Выполняется после выполнения триггера текущего состояния.

Триггер Перехода | Выполняется после выполнения триггера текущей смены состояния и перед выполнением триггера текущего состояния.

::: tip **Полезно**
В workflow - сохраняется инициатор запуска. Т.о., для загрузки данных инициатора - используйте реакцию takeAuthorUser
:::