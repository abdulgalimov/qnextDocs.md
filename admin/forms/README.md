# Формы

**Форма** - универсальное средство приема данных от пользователей.


![](./1.png)
## Настройки формы

**Глобальные настройки, распространяются на всю форму.**

| Функция | Описание |
| --- | --- |
| Ограничения | Доступны все предлагаемые платформой [**ограничения**](/docs/ext/restrictions).
| Тех. название | Название формы которое видно только админам |
| Заголовок | Текст, который будет отображаться в начале каждого поля |
| Локализация | Изменение текста системных кнопок формы |
| Результаты | В процессе написания |
| Нельзя отменить |  Разрешение или запрет пользователю отменять форму |
| Не сохранять результаты | Если вам не нужны результаты пройденных форм, можно отключить их хранение |
| Чистить историю | Удаление или сохранение пройденных результатов форм |
| Разрешить команды |  Настройка реакций бота на команды во время прохождения формы: Будет реагировать или нет |
| Разрешить кнопки клавиатуры | Настройка реакций бота на клавиатуру во время заполнения формы: Будет реагировать или нет |
| Ограничение количества | Ограничивает количество раз, которое пользователь может запустить и пройти форму. |
| Ограничение времени | Ограничивает частоту прохождения формы. _Можно проходить форму, не чаще чем раз в N времени_ |
| Версия | В процессе написания |
| Google таблицы | Подключение и вывод результатов формы в **[Google таблицы](/docs/admin/google)** |
| Конвертор | Подключение конвертора для вывода результатов формы в **[Google таблицы](/docs/admin/google)** или **Excel** |
| Workflows | Подключение **[workflow](/admin/workflow/)** для дальнейшей работы с результатами формы|


## Поля формы

| Функция | Описание |
| --- | --- |
| [Choose](./#choose) | Поле предназначенное для мульти-выбора вариантов ответов. |
| [Select](./#select) | Поле для выбора одного варианта ответа. |
| [Branch](./#branch) | Поле представляющее из себя форму внутри поля. Внутри каждой кнопки можно создать свои поля со своими кнопками. |
| [Text](./#text) | Поле для приема текстовых сообщений. |
| [Number](./#number) | Поле для приема числовых значений. |
| [Email](//#email) | Поле для приема адресов электронных почт. |
| [Phone](./#phone) | Поля для приема телефонных номеров. |
| [Geo](./#geo) | Поле для запроса и приема геолокации. |
| [Url](./#url) | Поле для приема любого типа ссылок (не путать с mention). |
| [Image](./#image) | Поле для приема изображений. |
| [Video](./#video) | Поле для приема видео. |
| [Media](./#media) | Поле для приема файлов типа медиа. |
| [File](./#file) | Поле для приема файлов типа файл |
| [Audio](./#audio) | Поле принимает аудио. |
| [Voice](./#voice) | Поле принимает голосовые записи |
| [Duration](./#duration) | Поле для указания произвольного значения времени. |
| [Info](./#info) | Поле для отображения информации |
| [Date](./#date) | Поле для указания даты |
| [Secret](./#secret) | Устарело. Будет удалено |
| [SelectContent](./#selectContent) | Поле для выбора и загрузки данных контента. |
| [SelectButton](./#selectButton) | Поле для выбора и загрузки данных кнопки контента. |
| [Mention](./#mention) | Поле принимает юзернеймы пользователей. |
| [Sticker](./#sticker) | Поле принимает стикеры |
| [Time](./#time) | Поле для указания времени.|
| [List](./#list) | Поле для вывода больших списков кнопок с помощью инлайна |
| [Pay](./#pay) | в процессе описания |
| [Hidden](./#hidden) | Скрытое поле.  | 
| [Custom](./#custom) | Поле для приема любого типа данных (в том числе смешанных). |
| [User](./#user) | Поле для выбора пользователя бота |
| [Menu](./#menu) | Поле для выбора ранее созданного раздела [меню](/admin/menu/) |

### Настройки поля

**Индивидуальные настройки для каждого поля**

| Функция | Описание |
| --- | --- |
| Ограничения Поля | Ограничение доступности поля |
| Выключено | Включение/выключение поля |
| Скрыть в результатах | Скрытие ответа в поле в реакции [formResult](/docs/admin/forms/formresult) |
| Не показывать Web-превью | Отключение превью у ссылок |
| Изменить название | Изменить техническое название поля |
| Изменить текст | Изменить текст поля |
| Изменить фото | Изменить изображение поля |
| Карта настроек | В процессе написания |
| Завершить форму | Принудительно завершает форму, игнорируя все последующие поля |
| Не обязательный | Добавляет кнопку "пропустить поле", которая позволяет пропустить поле, не заполняя. |
| Статистика | Статистика поля |
 
### Сhoose

Поле предназначенное для мульти-выбора вариантов ответов. Можно выбирать несколько вариантов.

![](./2.png)

| Настройка поля | Описание |
| --- | --- |
| **Баллы** | Указание вес (цену, балл) кнопки. Балл всех нажатих кнопок будет доступен в триггере финиша в переменной: ```${formData.points}``` |
| **Скрыть кнопку** | Скрытие кнопки для пользователей |
| **Завершить выбор** | Завершение поля |
| **Завершить форму** | Завершение формы |
| **Быстрый переход** | позволяет перейти к нужному полю, пропуская промежуточные |

### Select

Поле для выбора одного варианта ответа. Можно выбрать только один вариант.

![](./3.png)

| Настройка поля | Описание |
| --- | --- |
| **Баллы** | позволяет указать вес (цену, балл) кнопки. Балл всех нажатих кнопок будет доступен в триггере финиша в переменной: ```${formData.points}``` |
| **Скрыть кнопку** | Скрытие кнопки для пользователей |
| **Завершить форму** | Завершение формы |
| **Быстрый переход** | позволяет перейти к нужному полю, пропуская промежуточные |

### Branch

Поле представляющее из себя форму внутри поля. Внутри каждой кнопки можно создать свои поля со своими кнопками.

| Настройка поля | Описание |
| --- | --- |
| **Скрытое ветвление** | Принятие произвольных данных, позволяющих гибко настраивать ответы. |
| **Подтверждение выбора** | пользователю надо будет дополнительно подтвердить свой выбор. |

| Настройка кнопки | Описание |
| --- | --- |
| **Баллы** | Установить вес (цену, балл) кнопки. Балл всех нажатих кнопок будет доступен в триггере финиша в переменной: ```${formData.points}``` |
| **Скрыть кнопку** | Скрытие кнопки для пользователей |
| **Завершить форму** | Завершение формы |
| **Быстрый переход** | Переход к указанному полю, пропуская промежуточные |

### Text

Поле для приема текстовых сообщений.

Пример: ```текст, кастомный текст```

| Настройка поля | Описание |
| --- | --- |
| Минимум и Максимум | Определяет количество символов которое будет принимать поле. |
| Регулярное выражение | Можно использовать регулярное выражение. Подробнее о [regEx](/admin/regexp/) |
| Форматированный текст | Поддержка и сохранение введенного форматированного текста. |

### Number

Поле для приема числовых значений.

Пример: ```1, 123456, 64562456```

| Настройка поля | Описание |
| --- | --- |
| Минимум и Максимум | Определяет диапазон чисел которые будет принимать поле. Например: от 1 до 100. |
| Дробное число | Позволяет вводить данные типа 110.1, 56.47. |

### Email

Поле для приема адресов электронных почт.

Пример: ```mail@mail.ru, ya@ya.ru```

### Phone

Поля для приема телефонных номеров.

| Режим | Описание |
| --- | --- |
| Предоставить номер | Предоставление номера с помощью кнопки. |
| Ввести номер Текстом | Опция позволяет пользователю отправить номер текстом. |

### Geo

Поле для приема геолокации пользователя с помощью кнопки клавиатуры "Отправить геолокацию"

### Url

Поле для приема любого типа ссылок.

Пример: ```qnext.app, t.me```

### Image

Поле для приема изображений.

Лог: ```update.message.photo```. Тип: ```jpg, bnp``` и т.д.

::: tip ℹ️
Не принимает отправленные файлы без сжатия
:::

### Video

Поле для приема видео.

Лог: ```update.message.video```. Тип:```avi, mp4, mkv``` и т.д.

::: tip ℹ️
Не принимает отправленные файлы без сжатия
:::

### Media

Поле для приема медиа.

Лог: ```update.message.photo```. Тип: ```jpg, bnp``` и т.д.

Лог: ```update.message.video```. Тип: ```avi, mp4, mkv``` и т.д.

Лог: ```update.message.audio```. Тип: ```mp3, wav, flac``` и т.д.

### File

Поле для приема файлов типа документ

```update.message.document```

### Audio

Поле принимает аудио. 

Лог: ```update.message.audio```. Тип: ```mp3, wav, flac``` и т.д.

::: tip ℹ️
Не принимает отправленные файлы без сжатия
:::

### Voice

Поле принимает голосовые записи*

### Duration

Поле для указания произвольного значения времени

![](./4.png)

### Info

Поле для отображения информации

![](./5.png)

### Date

Поле для указания даты. 

![](./6.png)

Имеет следующие настройки:

* **Исключения** - Разрешает выбирать только выходные, или наоборот, только будни.

![](./7.png)

| Настройка поля | Описание |
| --- | --- |
| **Прошлое время** | По умолчанию можно выбрать только настоящее и будущее время. Эта функция позволяет указывать прошлое время. |
| **Шаблон** | позволяет указывать дату в виде текста с соблюдением формата. |
| **Скрыть календарь** | скрывает календарь ввиде кнопок, оставляя возможность ввести дату только цифрами. |

### Secret

Устарело. Будет удалено.

### SelectContent

Поле для выбора и загрузки данных контента для дальнейшей работы с этим контентом.

### SelectButton

Поле для выбора и загрузки данных кнопки контента для дальнейшей работы с этой кнопкой из контента.

### Mention

Поле принимает @username пользователей

### Sticker

Поле принимает стикеры

### Time

Поле для указания времени в формате часы:минуты

![](./8.png)

### List

Поле для вывода больших списков кнопок с помощью инлайна.

Особое удобство поля в том, что кнопки загрузить с помощью JSON кода:

**Пример работы поля:**

![](./9.png)

![](./10.png)

Особое удобство поля в том, что кнопки загрузить с помощью JSON кода:

![](./11.png)

### Pay

—

### Hidden 

Скрытое поле. Удобное поле для передачи данных в форме без отображения содержимого в результатах форм, а так же для пользователя.

### Custom

Поле для приема любого типа данных (в том числе смешанных). Может одновременно принимать и ссылки и цифры, или ссылки и юзернеймы. 
Работает с связке с реакцией: [**writeFormCustom**](/admin/forms/reaction/writeformcustom/)

### User

Поле для выбора пользователя бота.

Имеет настройки поля: 

**Кандидаты** - позволяет выбрать определенную группу лиц, из которых можно будет выбрать пользователей:

**Типы пользователей:**
* Все пользователи бота
* Список пользователей
* Состоит в списке
* Не состоит в списке
* Контент
* Проголосовал
* Не проголосовал

**Исключения:**

![](./12.png)

### Menu

Поле для выбора ранее созданного раздела меню.

## Триггеры поля

| Триггер | Описание |
| --- | --- |
| Триггер Подготовки Поля | Срабатывает при запуске поля, но до отображения поля пользователю |
| Триггер Обработки Поля | Срабатывает после получения значения введенного пользователем и до его сохранения |
| Триггер Поля | Срабатывает после Триггера Обработки Поля. |
| Триггер Пропуска | Срабатывает при пропуске поля |
| Триггер Ошибки | Срабатывает если введены данные несоответствующие условиям поля |

## Триггеры формы

**Общие триггеры формы**

| Триггер | Описание |
| --- | --- |
| Триггер Старт | Триггер срабатывает первым и единожды при запуске формы. |
| Триггер Поля До | Триггер срабатывает перед запуском поля. Например, если вам нужно произвести какие-то расчета для дальнейшей работы, или же загрузить какие-то данные. |
| Триггер Поля После | Триггер срабатывает после принятия данных в форме. |
| Триггер Кнопки | Триггер срабатывает при нажатии на кнопки (поля типа select, choose, branch) |
| Триггер лимита количества | Триггер срабатывает при превышении лимита количества прохождений формы. |
| Триггер лимит времени | Триггер для ограничения частоты прохождения формы. Если выставить 1 час - форму можно будет проходить не чаще, чем раз в 1 час.
| Триггер Отмена | Триггер отмены срабатывает после нажатия на кнопку "**Отменить форму**" |
| Триггер Финиш | В триггере финиша работает реакция  [formResult](/docs/admin/forms/formresult), которая отображает данные пройденной формы. |

---

::: tip Особенности
**Maximum file size to download is 20 MB**
[https://core.telegram.org/bots/api#file](https://core.telegram.org/bots/api#file)
:::

### Реакции

[Реакции](/admin/forms/reaction/)


 




