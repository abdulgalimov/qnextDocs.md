---
sidebar: auto
---

## QNext. Реакция parseDate

Реакция ⚡️parseDate предназначена для создания объекта даты из строкового представления любого формате.

Чтобы производить какие либо манипуляции с датой и временем, необходимо получить так специальный объект [Date](https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/Date). Строка с датой которую присылает пользователь может быть совершенно разной, вы можете например попросить пользователей присылать дату в формате `дд.мм.гггг`, а можно например так `гггг/дд/мм`. Чтобы реакция умела разбирать любую строку, необходимо в реакции прописать регулярное выражение. В этом регулярном выражении необходимо указать [именованные группы](https://learn.javascript.ru/regexp-groups#imenovannye-gruppy) с именами:
* year
* month
* day
* hours
* minutes
* seconds

Например в следующем регулярном выражении указаны группы `year`, `month` и `day`:
::: tip
/(?<day>\d{1,2})\.(?<month>\d{1,2})\.(?<year>\d{4})/<br>
:::

Такое регулярное выражение найдет строку вида `22.02.2021`. Не обязательно указывать все группы. Если вы укажите `day`, `month` и `year`, но не укажите `hours`, `minutes` и `seconds`, тогда будет создана указанная дата, с текущим временем. Т.е. если группа не указана, тогда соответствующее значение берется из текущей даты/времени. 



Чтобы понять назначение этой реакции, рассмотрим простой пример. Необходимо получить от пользователя строку вида: `22.02.2021 15:30`, а бот должен преобразовать эту строку в дату и посчитать сколько дней, часов, минут осталось до этой даты. Для того чтобы разобрать такую строку, необходимо создать реакцию parseDate с регулярным выражением:
::: tip
/(?<day>\d{1,2})\.(?<month>\d{1,2})\.(?<year>\d{4}) (?<hours>\d{1,2}):(?<minutes>\d{1,2})/<br>
:::

Далее чтобы посчитать разницу до этой даты, можно воспользоваться макросом:
::: tip
!{date|<br>  differenceWith: parseDateResult.date;<br>  view: total;<br>  utc<br>}<br>
:::

Подробнее про макрос !{date} читайте в [документации](/docs-test/ph/macros/date).



[QNext. Перечень реакции](/docs-test/ph/reactions)

[Original](https://telegra.ph/QNext-Reactions-parseDate-02-21)