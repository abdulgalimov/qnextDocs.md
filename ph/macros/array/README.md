---
sidebar: auto
---

## QNext. Макрос array

[⬅️QNext. Макросы](/docs-test/ph/macros)



Макрос позволяет делать различные манипуляции со списками(массивами, Array в терминологии JavaScript). Для работы с этим макросом, у вас должен где то лежать список(массив) элементов. Это может быть локальная или глобальная переменная, или какой то результат выполнения скрипта. Найти список(массив) можно в логах. В логах списки(массивы) помечаются квадратными скобками `[ ... ]`:

![](./1.png)

В этом примере у нас в `localVar` переменных лежит локальная переменная `myArrayList`, которая является список, и в этом списке у нас 3 элемента:
1 текст "test"
2 число 123
3 текст "abc"

Чтобы ботом вывести например количество элементов этого списка, вы можете воспользоваться макросом:
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: length;<br>}<br>
:::

Макрос выполняет различные действия, в зависимости от значения параметра `type`:
* type: length
* type: indexOf
* type: lastIndexOf
* type: join
* type: at


### type: length

Количество элементов в списке:
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: length;<br>}<br>
:::
### type: indexOf

Найти номер позиции элемента в списке. Например вы хотите найти в какой позиции находит текст `"abc"`:
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: indexOf;<br>  element: abc;<br>}<br>
:::

Макрос вернет значение `2`, потому что позиционирование элементов а массиве начинается не с `1` с номера `0`.
### type: lastIndexOf

Тоже самое что и `type: indexOf`, только поиска начинается с конца массива:
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: lastIndexOf;<br>  element: abc;<br>}<br>
:::


### type: join

Преобразовывает массив в строку, разделяя элементы разделителем. 
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: join;<br>  separator: @;<br>}<br>
:::

В этом примере мы использовали в качестве разделителя символ @, значит на выходе мы получим вот такую строку:
::: tip
test@123@abc<br>
:::

Если вы хотите использовать в качестве разделителя пробел, или переход строки, воспользуйтесь [спец символами](/docs-test/ph/macros).


### type: at

Возвращает элемент массив по указанному номеру. Например вы хотите получить из массива элемент с номером `1`:
::: tip
!{array|<br>  path: localVar.myArrayList;<br>  type: at;<br>  index: 1;<br>}<br>
:::

Макрос вернет значение `123`. Не забывайте что нумерация в массиве начинается не с `1` а с `0`.







[⬅️QNext. Макросы](/docs-test/ph/macros)



[Original](https://telegra.ph/QNext-Macros-Array-04-06)